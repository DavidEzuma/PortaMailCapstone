### Robot Localization Parameters ###
ekf_filter_node:
  ros__parameters:
    frequency: 30.0
    two_d_mode: true
    publish_tf: true
    
    # Frame IDs
    map_frame: map
    odom_frame: odom
    base_link_frame: base_link
    world_frame: odom  # EKF publishes the odom->base_link transform

    # --- Input 1: Teensy Encoders ---
    # Teensy must publish to /wheel/odom (renamed from /odom to avoid conflict)
    odom0: /wheel/odom
    # Trust: Linear Velocity X (Forward speed), Yaw Velocity (Turning speed)
    odom0_config: [false, false, false,
                   false, false, false,
                   true,  false, false,
                   false, false, true,
                   false, false, false]
    odom0_differential: false
    odom0_queue_size: 10

    # --- Input 2: BNO055 IMU ---
    # Driver must publish to /imu/data
    imu0: /imu/data
    # Trust: Absolute Yaw (Heading), Yaw Velocity
    imu0_config: [false, false, false,
                  false, false, true,
                  false, false, false,
                  false, false, true,
                  true,  false, false] # Trust linear acceleration
    imu0_differential: false
    imu0_relative: true # Resets heading to 0 on startup
    imu0_queue_size: 10